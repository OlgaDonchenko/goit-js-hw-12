{"version":3,"file":"commonHelpers.js","sources":["../src/img/octagon.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","\nimport iconRejected from '../img/octagon.png';\nexport function getPictures(name) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '42458918-8f01ea81f4ffacec8edc4f5cf';\n\n    const searchParams = new URLSearchParams({\n        key: KEY,\n        q: name,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    })\n\n    return fetch(`${BASE_URL}?${searchParams}`)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.statusText);\n            }\n            return response.json();\n        });\n}\n\nexport { iconRejected };","\nimport SimpleLightbox from 'simplelightbox';\n\nexport function createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                />\n              </a>\n              <div class=\"info-block\">\n                <div class=\"block\">\n                  <h2 class=\"title\">Likes</h2>\n                  <p class=\"amount\">${likes}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Views</h2>\n                  <p class=\"amount\">${views}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Comments</h2>\n                  <p class=\"amount\">${comments}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Downloads</h2>\n                  <p class=\"amount\">${downloads}</p>\n                </div>\n              </div>\n            </li>`)\n        .join('');\n}\n\nexport function initializeLightbox() {\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPictures, iconRejected } from './js/pixabay-api';\nimport { createMarkup, initializeLightbox } from './js/render-functions';\n\nconst formSearch = document.querySelector('.form-search');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.lds-heart');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nloader.style.display = 'none';\n\nformSearch.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nfunction onSearch(event) {\n    event.preventDefault();\n\n    const searchValue = formSearch.elements.search.value.trim();\n\n    if (searchValue === '') {\n        iziToast.show({\n            message: `The search query cannot be empty`,\n            timeout: 5000,\n            close: false,\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            title: 'Sorry,',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n        return;\n    }\n\n    loader.style.display = 'block';\n    listImages.innerHTML = '';\n\n    getPictures(searchValue, currentPage)\n        .then(data => {\n            if (!data.hits.length) {\n                iziToast.show({\n                    title: 'Sorry,',\n                    message: 'There are no images matching your search query. Please try again!',\n                    position: 'bottomLeft',\n                    backgroundColor: '#ef4040',\n                    messageSize: 16,\n                    messageColor: '#fff',\n                    titleSize: 16,\n                    titleColor: '#fff',\n                    iconUrl: iconRejected,\n                });\n            }\n\n            listImages.insertAdjacentHTML('afterbegin', createMarkup(data.hits));\n            initializeLightbox();\n\n            if (data.totalHits > currentPage * 15) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n            }\n\n            currentQuery = searchValue;\n            currentPage = 1;\n        })\n        .catch((error) => {\n            console.log(error);\n            iziToast.show({\n                title: 'Sorry,',\n                message: 'Try again!',\n                position: 'bottomLeft',\n                backgroundColor:'#ef4040',\n                messageSize: 16,\n                messageColor: '#fff',\n                titleSize: 16,\n                titleColor: '#fff',\n                iconUrl: iconRejected,\n            });\n        })\n        .finally(() => loader.style.display = 'none');\n}\n\nfunction onLoadMore() {\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n\n    currentPage++;\n\n    getPictures(currentQuery, currentPage)\n        .then(data => {\n            if (!data.hits.length) {\n                iziToast.show({\n                    title: 'Sorry,',\n                    message: 'There are no more images to load.',\n                    position: 'bottomLeft',\n                    backgroundColor: '#ef4040',\n                    messageSize: 16,\n                    messageColor: '#fff',\n                    titleSize: 16,\n                    titleColor: '#fff',\n                    iconUrl: iconRejected,\n                });\n            }\n\n            listImages.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n            initializeLightbox();\n\n            if (data.totalHits > currentPage * 15) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n            iziToast.show({\n                title: 'Sorry,',\n                message: 'Try again!',\n                position: 'bottomLeft',\n                backgroundColor: '#ef4040',\n                messageSize: 16,\n                messageColor: '#fff',\n                titleSize: 16,\n                titleColor: '#fff',\n                iconUrl: iconRejected,\n            });\n        })\n        .finally(() => loader.style.display = 'none');\n}\n\n\n\n\n"],"names":["iconRejected","getPictures","name","BASE_URL","KEY","searchParams","response","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","initializeLightbox","SimpleLightbox","formSearch","listImages","loader","loadMoreBtn","onSearch","onLoadMore","currentPage","currentQuery","event","searchValue","iziToast","data","error"],"mappings":"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"}