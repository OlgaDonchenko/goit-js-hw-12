{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/octagon.png","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nexport async function getPictures(name, page = 1, perPage = 15) {\n    try {\n        const BASE_URL = 'https://pixabay.com/api/';\n        const KEY = '42458918-8f01ea81f4ffacec8edc4f5cf';\n\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: KEY,\n                q: name,\n                page: page,\n                per_page: perPage,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(error);\n        throw new Error('Error fetching pictures from Pixabay API');\n    }\n}\n","\nimport SimpleLightbox from 'simplelightbox';\n// import iconRejected from '../img/octagon.png';\n\n\nexport function createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                />\n              </a>\n              <div class=\"info-block\">\n                <div class=\"block\">\n                  <h2 class=\"title\">Likes</h2>\n                  <p class=\"amount\">${likes}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Views</h2>\n                  <p class=\"amount\">${views}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Comments</h2>\n                  <p class=\"amount\">${comments}</p>\n                </div>\n                <div class=\"block\">\n                  <h2 class=\"title\">Downloads</h2>\n                  <p class=\"amount\">${downloads}</p>\n                </div>\n              </div>\n            </li>`)\n        .join('');\n}\n\nexport function initializeLightbox() {\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPictures } from './js/pixabay-api';\nimport { createMarkup, initializeLightbox } from './js/render-functions';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iconRejected from './img/octagon.png'; \n\nconst formSearch = document.querySelector('.form-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.lds-heart');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet firstGalleryItem;\n\nloader.style.display = 'none';\n\nformSearch.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n    event.preventDefault();\ncurrentPage = 1;\n    const searchValue = formSearch.elements.search.value.trim();\n\n    if (searchValue === '') {\n        iziToast.show({\n            message: `The search query cannot be empty`,\n            timeout: 5000,\n            close: false,\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            title: 'Sorry,',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n        return;\n    }\n\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n\n    try {\n        const data = await getPictures(searchValue, currentPage);\n        handleSearchResult(data, searchValue);\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Sorry,',\n            message: 'An error occurred while fetching images. Please try again later!',\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nasync function onLoadMore() {\n    currentPage++;\n\n    try {\n        const data = await getPictures(currentQuery, currentPage);\n        handleLoadMoreResult(data);\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Sorry,',\n            message: 'An error occurred while loading more images. Please try again later!',\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nfunction handleSearchResult(data, query) {\n    if (!data.hits.length) {\n        iziToast.show({\n            title: 'Sorry,',\n            message: 'There are no images matching your search query. Please try again!',\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n          loadMoreBtn.style.display = 'none';\n        return;\n    }\n\n    gallery.innerHTML = createMarkup(data.hits);\n    initializeLightbox();\n    currentQuery = query;\n    firstGalleryItem = document.querySelector('.gallery-item');\n    if (firstGalleryItem) {\n        window.scrollBy({\n            top: firstGalleryItem.getBoundingClientRect().height * 2, \n            behavior: 'smooth',\n        });\n    }\n    if (data.totalHits > currentPage * 15) {\n        loadMoreBtn.style.display = 'block';\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n    \n}\n\nfunction handleLoadMoreResult(data) {\n    if (!data.hits.length) {\n        iziToast.show({\n            title: 'Sorry,',\n            message: 'There are no more images to load.',\n            position: 'bottomLeft',\n            backgroundColor: '#ef4040',\n            messageSize: 16,\n            messageColor: '#fff',\n            titleSize: 16,\n            titleColor: '#fff',\n            iconUrl: iconRejected,\n        });\n         loadMoreBtn.style.display = 'none';\n        return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    initializeLightbox();\n\n    if (data.totalHits > currentPage * 15) {\n        loadMoreBtn.style.display = 'block';\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n    \n     const lastGalleryItem = gallery.lastElementChild;\n    lastGalleryItem.scrollIntoView({ behavior: 'smooth', block: 'end' });\n     loadMoreBtn.style.display = 'block';\n\n}\n"],"names":["getPictures","name","page","perPage","BASE_URL","KEY","axios","error","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","initializeLightbox","SimpleLightbox","iconRejected","formSearch","gallery","loader","loadMoreBtn","currentPage","currentQuery","firstGalleryItem","onSearch","onLoadMore","event","searchValue","iziToast","data","handleSearchResult","handleLoadMoreResult","query"],"mappings":"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"}